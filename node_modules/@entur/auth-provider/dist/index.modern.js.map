{"version":3,"file":"index.modern.js","sources":["../src/common.ts","../src/Auth0AuthProvider.tsx","../src/AuthProvider.tsx","../src/index.tsx"],"sourcesContent":["import React from 'react'\nimport { Auth, User } from './typings'\n\nexport const defaultAuthState = {\n  isLoading: false,\n  isAuthenticated: false,\n  user: null,\n  roleAssignments: null,\n  getAccessToken: () => Promise.resolve(''),\n  logout: () => {},\n  login: () => {}\n}\n\nfunction createAuthContext<T extends User>() {\n  return React.createContext<Auth<T>>(defaultAuthState)\n}\n\nexport const AuthContext = createAuthContext();\n\n","import React, { useEffect, useState } from 'react'\nimport { useAuth0 } from '@auth0/auth0-react'\nimport { AuthContext } from './common'\n\ninterface Props {\n  children?: React.ReactNode\n  claimsNamespace?: string\n  loginAutomatically?: boolean\n}\n\nexport const Auth0AuthProvider = ({\n  children,\n  claimsNamespace,\n  loginAutomatically\n}: Props) => {\n  const {\n    isLoading,\n    isAuthenticated,\n    user,\n    loginWithRedirect,\n    getIdTokenClaims,\n    getAccessTokenSilently,\n    logout\n  } = useAuth0()\n  const [roleAssignments, setRoleAssignments] = useState<any>()\n\n  useEffect(() => {\n    const getClaims = async () => {\n      const idTokenClaims = await getIdTokenClaims()\n      if (idTokenClaims) {\n        setRoleAssignments(idTokenClaims[claimsNamespace!])\n      }\n    }\n    if (isAuthenticated && claimsNamespace !== undefined) {\n      getClaims()\n    }\n  }, [isAuthenticated, getIdTokenClaims])\n\n  if (!isAuthenticated && !isLoading) {\n    if (loginAutomatically) {\n      loginWithRedirect()\n    }\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated,\n        isLoading,\n        user,\n        roleAssignments,\n        getAccessToken: getAccessTokenSilently,\n        logout,\n        login: (redirectUri?: string) => loginWithRedirect({ redirectUri })\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","import React from 'react'\nimport { Auth0Provider } from '@auth0/auth0-react'\nimport { Auth0AuthProvider } from './Auth0AuthProvider'\nimport { Auth0Config } from './typings'\n\ninterface Props {\n  keycloakConfigUrl?: string\n  auth0Config?: Auth0Config\n  auth0ClaimsNamespace?: string\n  children?: React.ReactNode\n  loginAutomatically?: boolean\n}\n\nexport const AuthProvider = ({\n  auth0Config,\n  auth0ClaimsNamespace,\n  children,\n  loginAutomatically = true\n}: Props) => {\n  return (\n    <Auth0Provider\n      useRefreshToken\n      cacheLocation={\n        window.location.hostname.indexOf('localhost') > -1\n          ? 'localstorage'\n          : 'memory'\n      }\n      {...auth0Config!}\n    >\n      <Auth0AuthProvider\n        claimsNamespace={auth0ClaimsNamespace}\n        loginAutomatically={loginAutomatically}\n      >\n        {children}\n      </Auth0AuthProvider>\n    </Auth0Provider>\n  )\n}\n","import { useContext } from 'react'\nimport { AuthContext } from './common'\n\nexport { AuthProvider as default } from './AuthProvider'\n\nexport const useAuth = () => useContext(AuthContext)\n"],"names":["defaultAuthState","isLoading","isAuthenticated","user","roleAssignments","getAccessToken","Promise","resolve","logout","login","createAuthContext","React","createContext","AuthContext","Auth0AuthProvider","_ref","children","claimsNamespace","loginAutomatically","_useAuth","useAuth0","loginWithRedirect","getIdTokenClaims","getAccessTokenSilently","_useState","useState","setRoleAssignments","useEffect","getClaims","then","idTokenClaims","e","reject","undefined","Provider","value","redirectUri","AuthProvider","auth0Config","auth0ClaimsNamespace","_ref$loginAutomatical","Auth0Provider","useRefreshToken","cacheLocation","window","location","hostname","indexOf","useAuth","useContext"],"mappings":"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"}